(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{308:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},309:function(e,t,n){var r=n(21),i="["+n(308)+"]",s=RegExp("^"+i+i+"*"),o=RegExp(i+i+"*$"),a=function(e){return function(t){var n=String(r(t));return 1&e&&(n=n.replace(s,"")),2&e&&(n=n.replace(o,"")),n}};e.exports={start:a(1),end:a(2),trim:a(3)}},311:function(e,t,n){var r=n(4),i=n(97);e.exports=function(e,t,n){var s,o;return i&&"function"==typeof(s=t.constructor)&&s!==n&&r(o=s.prototype)&&o!==n.prototype&&i(e,o),e}},331:function(e,t,n){},358:function(e,t,n){"use strict";var r=n(6),i=n(3),s=n(96),o=n(10),a=n(8),c=n(22),u=n(311),l=n(44),h=n(1),d=n(28),f=n(67).f,p=n(23).f,m=n(7).f,w=n(309).trim,v=i.Number,g=v.prototype,x="Number"==c(d(g)),y=function(e){var t,n,r,i,s,o,a,c,u=l(e,!1);if("string"==typeof u&&u.length>2)if(43===(t=(u=w(u)).charCodeAt(0))||45===t){if(88===(n=u.charCodeAt(2))||120===n)return NaN}else if(48===t){switch(u.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+u}for(o=(s=u.slice(2)).length,a=0;a<o;a++)if((c=s.charCodeAt(a))<48||c>i)return NaN;return parseInt(s,r)}return+u};if(s("Number",!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var b,E=function(e){var t=arguments.length<1?0:e,n=this;return n instanceof E&&(x?h((function(){g.valueOf.call(n)})):"Number"!=c(n))?u(new v(y(t)),n,E):y(t)},R=r?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),S=0;R.length>S;S++)a(v,b=R[S])&&!a(E,b)&&m(E,b,p(v,b));E.prototype=g,g.constructor=E,o(i,"Number",E)}},359:function(e,t,n){"use strict";var r=n(0),i=n(43),s=n(360),o=n(361),a=n(1),c=1..toFixed,u=Math.floor,l=function(e,t,n){return 0===t?n:t%2==1?l(e,t-1,n*e):l(e*e,t/2,n)},h=function(e,t,n){for(var r=-1,i=n;++r<6;)i+=t*e[r],e[r]=i%1e7,i=u(i/1e7)},d=function(e,t){for(var n=6,r=0;--n>=0;)r+=e[n],e[n]=u(r/t),r=r%t*1e7},f=function(e){for(var t=6,n="";--t>=0;)if(""!==n||0===t||0!==e[t]){var r=String(e[t]);n=""===n?r:n+o.call("0",7-r.length)+r}return n};r({target:"Number",proto:!0,forced:c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!a((function(){c.call({})}))},{toFixed:function(e){var t,n,r,a,c=s(this),u=i(e),p=[0,0,0,0,0,0],m="",w="0";if(u<0||u>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(m="-",c=-c),c>1e-21)if(n=(t=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t}(c*l(2,69,1))-69)<0?c*l(2,-t,1):c/l(2,t,1),n*=4503599627370496,(t=52-t)>0){for(h(p,0,n),r=u;r>=7;)h(p,1e7,0),r-=7;for(h(p,l(10,r,1),0),r=t-1;r>=23;)d(p,1<<23),r-=23;d(p,1<<r),h(p,1,1),d(p,2),w=f(p)}else h(p,0,n),h(p,1<<-t,0),w=f(p)+o.call("0",u);return w=u>0?m+((a=w.length)<=u?"0."+o.call("0",u-a)+w:w.slice(0,a-u)+"."+w.slice(a-u)):m+w}})},360:function(e,t,n){var r=n(22);e.exports=function(e){if("number"!=typeof e&&"Number"!=r(e))throw TypeError("Incorrect invocation");return+e}},361:function(e,t,n){"use strict";var r=n(43),i=n(21);e.exports="".repeat||function(e){var t=String(i(this)),n="",s=r(e);if(s<0||s==1/0)throw RangeError("Wrong number of repetitions");for(;s>0;(s>>>=1)&&(t+=t))1&s&&(n+=t);return n}},362:function(e,t,n){"use strict";n(331)},368:function(e,t,n){"use strict";n.r(t);n(358),n(359),n(98);var r=n(57),i=n(330);var s={name:"VRImage",props:{title:{type:String,default:!1},src:{type:String,required:!0}},data:function(){return{mode:"default",fullscreenIcon:["fas","expand"],fov:75,camera:null,scene:null,renderer:null,raycaster:null,mouse:null,intersects:null,isUserIntefacing:!1,down:{x:0,y:0,lon:0,lat:0},lon:0,lat:0}},computed:{source:function(){return this.$site.base+this.src.substring(1)}},methods:{init:function(){var e=this.width/this.height;this.camera=new i.e(this.fov,e,1,1100),this.scene=new i.g;var t=(new i.i).load(this.source);t.mapping=i.a,this.scene.background=t;var n=new i.h(1,60,40),r=(new i.i).load(this.$withBase("/assets/img/vr/kitchen.jpg")),s=new i.d({map:r,transparent:!0,opacity:.5}),o=new i.c(n,s);o.position.z=-5,o.position.x=0,o.position.y=0,o.rotation.y=.5*Math.PI,console.log("DEBUG","locationMesh - uuid",o.uuid),this.scene.add(o),this.renderer=new i.l({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.width,this.height),this.renderer.xr.enabled=!0,this.renderer.xr.setReferenceSpaceType("local"),this.$refs.container.appendChild(this.renderer.domElement),this.$refs.container.appendChild(class{static createButton(e,t){t&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const n=document.createElement("button");function r(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null,n.textContent="VR NOT SUPPORTED"}function i(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-vr").then((function(t){t?function(){let t=null;async function r(r){r.addEventListener("end",i),await e.xr.setSession(r),n.textContent="EXIT VR",t=r}function i(){t.removeEventListener("end",i),n.textContent="ENTER VR",t=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="ENTER VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===t){const e={optionalFeatures:["local-floor","bounded-floor","hand-tracking"]};navigator.xr.requestSession("immersive-vr",e).then(r)}else t.end()}}():r()})),n;{const e=document.createElement("a");return!1===window.isSecureContext?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR NEEDS HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="WEBXR NOT AVAILABLE"),e.style.left="calc(50% - 90px)",e.style.width="180px",e.style.textDecoration="none",i(e),e}}}.createButton(this.renderer)),this.raycaster=new i.f,this.mouse=new i.j,this.$refs.container.addEventListener("pointerdown",this.onPointerDown),this.$refs.container.addEventListener("wheel",this.onMouseWheel),this.$refs.container.addEventListener("resize",this.onWindowResize),this.$refs.container.addEventListener("mousemove",this.onMouseMove),this.$refs.container.addEventListener("click",this.onClick),this.renderer.setAnimationLoop(this.render)},animate:function(){window.requestAnimationFrame(this.animate),this.updateScene()},render:function(){this.raycaster.setFromCamera(this.mouse,this.camera),this.intersects=this.raycaster.intersectObjects(this.scene.children);for(var e=0;e<this.scene.children.length;e++)this.scene.children[e].scale=new i.k(1,1,1),this.scene.children[e].material.opacity=.5;for(var t=0;t<this.intersects.length;t++)this.intersects[t].object.scale=new i.k(2,2,2),this.intersects[t].object.material.opacity=1;this.renderer.render(this.scene,this.camera)},updateScene:function(){this.lat=Math.max(-85,Math.min(85,this.lat));var e=i.b.degToRad(90-this.lat),t=i.b.degToRad(this.lon),n=500*Math.sin(e)*Math.cos(t),r=500*Math.cos(e),s=500*Math.sin(e)*Math.sin(t);this.camera.lookAt(n,r,s),this.renderer.render(this.scene,this.camera)},updateSize:function(){var e=this.$refs.root.getBoundingClientRect().width;this.width=e,this.height=9*e/16},updateRendererSize:function(){this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)},resetSize:function(){var e=this.$refs.root.parentNode.getBoundingClientRect().width;this.width=e,this.height=9*e/16},onWindowResize:function(){this.updateSize(),this.updateRendererSize()},onPointerDown:function(e){!1!==e.isPrimary&&(this.isUserIntefacing=!0,this.down.x=e.clientX,this.down.y=e.clientY,this.down.lon=this.lon,this.down.lat=this.lat,window.document.addEventListener("pointermove",this.onPointerMove),window.document.addEventListener("pointerup",this.onPointerUp))},onPointerMove:function(e){!1!==e.isPrimary&&(this.lon=.1*(this.down.x-e.clientX)+this.down.lon,this.lat=.1*(e.clientY-this.down.y)+this.down.lat)},onPointerUp:function(e){!1!==e.isPrimary&&(this.isUserIntefacing=!1,window.document.removeEventListener("pointermove",this.onPointerMove),window.document.removeEventListener("pointerup",this.onPointerUp))},onMouseWheel:function(e){e.preventDefault(),this.fov=Number(this.camera.fov+.05*e.deltaY).toFixed(0),this.camera.fov=i.b.clamp(this.fov,10,75),this.camera.updateProjectionMatrix()},onMouseMove:function(e){this.mouse.x=e.offsetX/this.width*2-1,this.mouse.y=-e.offsetY/this.height*2+1},onClick:function(e){console.log("DEBUG",this.intersects.length,this.intersects);for(var t=0;t<this.intersects.length;t++)console.log("DEBUG","uuid",this.intersects[t].object.uuid)},onClickFullscreen:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("default"!==t.mode){e.next=5;break}return e.next=3,t.enterFullScreen();case 3:e.next=6;break;case 5:t.resetFullScreen();case 6:case"end":return e.stop()}}),e)})))()},enterFullScreen:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("fullscreen"!==e.mode){t.next=2;break}return t.abrupt("return");case 2:return e.mode="fullscreen",e.fullscreenIcon=["fas","compress"],e.width=window.screen.width,e.height=window.screen.height,e.updateRendererSize(),e.$refs.root.classList.add("fullscreen"),t.next=10,e.$refs.root.requestFullscreen();case 10:case"end":return t.stop()}}),t)})))()},resetFullScreen:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("default"!==e.mode){t.next=2;break}return t.abrupt("return");case 2:e.mode="default",e.fullscreenIcon=["fas","expand"],e.resetSize(),e.camera.aspect=e.width/e.height,e.camera.updateProjectionMatrix(),e.renderer.setSize(e.width,e.height),e.$refs.root.classList.remove("fullscreen"),window.document.fullscreenElement&&window.document.exitFullscreen();case 10:case"end":return t.stop()}}),t)})))()},onFullscreenChange:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.document.fullscreenElement){e.next=3;break}return e.next=3,t.resetFullScreen();case 3:case"end":return e.stop()}}),e)})))()}},mounted:function(){this.updateSize(),this.init(),this.animate(),window.document.addEventListener("fullscreenchange",this.onFullscreenChange)},beforeDestroy:function(){window.document.removeEventListener("fullscreenchange",this.onFullscreenChange)}},o=(n(362),n(41)),a=Object(o.a)(s,(function(){var e=this.$createElement,t=this._self._c||e;return t("div",{ref:"root",staticClass:"root"},[t("div",{ref:"container",staticClass:"container"}),this._v(" "),t("button",{staticClass:"fullscreen-toggle",on:{click:this.onClickFullscreen}},[t("font-awesome-icon",{attrs:{icon:this.fullscreenIcon}})],1)])}),[],!1,null,"0b13b793",null);t.default=a.exports}}]);